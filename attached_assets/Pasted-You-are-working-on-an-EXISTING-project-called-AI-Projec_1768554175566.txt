You are working on an EXISTING project called “AI Project Idea Generator”.

The project already:
- Generates project ideas correctly
- Runs on Replit
- Is deployable on Render (backend) and Vercel (frontend)
- Has working UI and API
- Generates AIML project blueprints and code templates

IMPORTANT RULES (DO NOT BREAK THESE):
- DO NOT change the UI
- DO NOT refactor existing architecture
- DO NOT remove or rename any existing features
- DO NOT change deployment-related logic
- DO NOT break Replit, Render, or Vercel compatibility
- ONLY fix code generation behavior

========================================
PROBLEM TO FIX (ONLY THIS)
========================================

Currently, the system ALWAYS generates Python-based AIML code,
even when the user selects other domains or languages.

This is incorrect.

========================================
REQUIRED FIX
========================================

Implement STACK-AWARE and DOMAIN-AWARE CODE GENERATION.

This means:
- The generated code templates MUST strictly match
  the user’s selected domain and programming language.
- The system must NOT default to Python unless explicitly selected.

========================================
MANDATORY DECISION STEP (DO NOT SKIP)
========================================

Before generating ANY code templates:

1. Read the user's selections:
   - Domain (AIML / Web / App / Hybrid / Software)
   - Programming Language / Stack (Python / JavaScript / Java / etc.)

2. Resolve the correct code generation strategy
   using the rules below.

========================================
STACK RESOLUTION RULES (STRICT)
========================================

Apply EXACTLY these rules:

1️⃣ IF Domain = AIML AND Language = Python
→ Generate Python-based ML templates
   (sklearn / pandas / numpy / torch / tensorflow)

2️⃣ IF Domain = AIML AND Language = JavaScript
→ Generate JavaScript ML templates
   (TensorFlow.js / Node.js based ML pipelines)

3️⃣ IF Domain = AIML AND Language = Java
→ Generate Java-based ML architecture templates
   (Weka / DL4J style scaffolding, NO Python)

4️⃣ IF Domain = Web
→ Generate Web application scaffolding ONLY
   (Frontend + Backend structure, NO ML training code)

5️⃣ IF Domain = App
→ Generate Mobile / Android / App architecture templates
   (Java / Kotlin / Flutter style, NO ML training code)

6️⃣ IF Domain = Hybrid
→ Generate MULTI-PART output:
   - AIML backend templates (language based on selection)
   - Application / Web integration templates

7️⃣ IF Language is NOT AIML-compatible
→ Generate AI-INTEGRATION templates
   (API-based inference, NOT model training)

========================================
IMPORTANT CONSTRAINTS
========================================

- DO NOT generate Python ML code unless Python is selected
- DO NOT generate ML training code for non-AIML domains
- DO NOT remove AIML explanations or blueprints
- DO NOT generate full runnable applications
- Generate ONLY templates, scaffolds, and blueprints

========================================
WHAT MUST REMAIN UNCHANGED
========================================

- Project idea generation logic
- Deployment readiness (Render + Vercel)
- Database optional handling
- API routes and UI behavior
- Existing prompts, except for this fix

========================================
EXPECTED RESULT
========================================

For the SAME UI and SAME inputs:
- The project idea remains the same
- The generated CODE changes based on:
  - Domain
  - Language
- Python code appears ONLY when Python is selected
- JavaScript / Web / App users get relevant templates

This fix should feel like a LOGICAL EXTENSION,
not a redesign.

Now implement ONLY this behavior safely and show
the updated output format.
